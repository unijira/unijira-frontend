<ion-content>
  <h1>Sprint</h1>
  {{ startSpring }} - {{ endSpring }} ({{ (sprint.tasks.length) }} Tasks)
  <div class="sprint">
    <div *ngIf="(this.sprint.tasks.length == 0)">
      <p>Sprint vuoto</p>
    </div>
    <ion-list dragula="bag" [(dragulaModel)]="sprint.tasks" lines="none">
      <ion-row
        *ngFor="let task of sprint.tasks"
        class="ion-align-items-end"
        class="task-item"
      >
        <ion-col size="1"> {{ task.type }} </ion-col>
        <ion-col> {{ task.name }} </ion-col>
        <ion-col size="2" class="ion-justify-content-end icon-area">
          <ion-badge color="medium">{{ task.weight}}</ion-badge>
          <ion-badge *ngIf="task.status == 'da completare' " color="medium"
            >{{ task.status }}</ion-badge
          >
          <ion-badge *ngIf="task.status == 'completata' " color="success"
            >{{ task.status }}</ion-badge
          >
          <ion-badge *ngIf="task.status == 'in corso' " color="primary"
            >{{ task.status }}</ion-badge
          >
          <ion-icon
            *ngIf="task.children?.length > 0"
            name="git-branch"
          ></ion-icon>
          <ion-thumbnail *ngIf="task.assignedTo && task.assignedTo.lenght > 0">
            <img ng-src="{{ task.assignedTo[0].avatar }}" />
          </ion-thumbnail>

          <div *ngIf="task.assignedTo && task.assignedTo.lenght > 0">
            {{ task.assignedTo[0].avatar }}
          </div>

          <ion-icon class="edit-icon" name="create"></ion-icon>
        </ion-col>
      </ion-row>
    </ion-list>
  </div>
  <h1>Backlog</h1>
  <div class="backlog">
    <div *ngIf="(this.backlog.length == 0)">
      <p>Backlog vuoto</p>
    </div>

    <ion-list dragula="bag" [(dragulaModel)]="this.backlog.tasks" lines="none">
      <ion-row
        *ngFor="let task of backlog.tasks"
        class="ion-align-items-end"
        class="task-item"
      >
        <ion-col size="1"> {{ task.type }} </ion-col>
        <ion-col> {{ task.name }} </ion-col>
        <ion-col size="2" class="ion-justify-content-end icon-area">
          <ion-badge color="medium">{{ task.weight}}</ion-badge>
          <ion-badge *ngIf="task.status == 'da completare' " color="medium"
            >{{ task.status }}</ion-badge
          >
          <ion-badge *ngIf="task.status == 'completata' " color="success"
            >{{ task.status }}</ion-badge
          >
          <ion-badge *ngIf="task.status == 'in corso' " color="primary"
            >{{ task.status }}</ion-badge
          >
          <ion-icon
            *ngIf="task.children?.length > 0"
            name="git-branch"
          ></ion-icon>
          <ion-thumbnail *ngIf="task.assignedTo && task.assignedTo.lenght > 0">
            <img ng-src="{{ task.assignedTo[0].avatar }}" />
          </ion-thumbnail>

          <div *ngIf="task.assignedTo && task.assignedTo.lenght > 0">
            {{ task.assignedTo[0].avatar }}
          </div>

          <ion-icon class="edit-icon" name="create"></ion-icon>
        </ion-col>
      </ion-row>
    </ion-list>
  </div>
</ion-content>
